<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub ä¸‹è½½å™¨æŒ‰é’®åŸå‹ - æ‹–æ‹½ä¸åœé æ•ˆæœæµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .info-panel {
            position: fixed;
            top: 80px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 300px;
            font-size: 12px;
            z-index: 100;
        }

        .info-panel h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .info-panel .info-item {
            margin: 8px 0;
            color: #666;
        }

        .info-panel .info-value {
            color: #0366d6;
            font-weight: 600;
        }

        .controls {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            max-width: 300px;
            font-size: 12px;
            z-index: 100;
        }

        .controls h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .controls button {
            display: block;
            width: 100%;
            padding: 8px 12px;
            margin: 5px 0;
            background: #0366d6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.2s;
        }

        .controls button:hover {
            background: #0256c7;
        }

        .controls button.danger {
            background: #d73a49;
        }

        .controls button.danger:hover {
            background: #cb2431;
        }

        /* ğŸ“¦ æŒ‰é’® */
        .toggle-btn {
            position: fixed;
            bottom: 30px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #0366d6;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 24px;
            z-index: 9999;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            
            /* ä½¿ç”¨ CSS å˜é‡åˆ†ç¦»ä¸åŒåœºæ™¯çš„æ ·å¼ */
            --hover-scale: 1;
            transform: scale(var(--hover-scale));
            
            /* åªè¿‡æ¸¡é¢œè‰²ã€é˜´å½±å’Œ hover ç¼©æ”¾ï¼Œä¸è¿‡æ¸¡ä½ç½® */
            transition: 
                background 0.3s ease,
                box-shadow 0.3s ease,
                --hover-scale 0.3s ease;
            
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
        }

        .toggle-btn:hover {
            background: #0256c7;
            --hover-scale: 1.1;  /* åªæ”¹å˜ç¼©æ”¾å˜é‡ */
            box-shadow: 0 4px 12px rgba(3, 102, 214, 0.3);
        }

        .toggle-btn.dragging {
            cursor: grabbing;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            --hover-scale: 1.1;  /* æ‹–æ‹½æ—¶ä¿æŒæ”¾å¤§ */
            
            /* æ‹–æ‹½æ—¶ç¦ç”¨ transitionï¼Œç¡®ä¿å®æ—¶å“åº” */
            transition: none;
        }

        .toggle-btn.docked {
            /* åœé æ—¶åªè¿‡æ¸¡ transform */
            transition: --hover-scale 0.2s ease;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            background: white;
            border: 2px solid #0366d6;
            border-radius: 8px;
            padding: 15px;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            width: 300px;
            max-height: 600px;
            overflow-y: auto;
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e4e8;
        }

        .panel-header .title {
            font-weight: bold;
            font-size: 14px;
            color: #24292e;
        }

        .panel-header .close-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 24px;
            height: 24px;
        }

        .panel-content {
            font-size: 13px;
            color: #24292e;
        }

        .panel-content p {
            margin: 8px 0;
            line-height: 1.5;
        }

        .panel-content ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .panel-content li {
            margin: 4px 0;
        }

        /* è¾¹ç¼˜æŒ‡ç¤ºå™¨ */
        .edge-indicator {
            position: fixed;
            background: rgba(255, 0, 0, 0.3);
            border: 2px dashed #ff0000;
            pointer-events: none;
            z-index: 50;
            display: none;
        }

        .edge-indicator.active {
            display: block;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 0.6;
            }
        }

        /* æµ‹è¯•åŒºåŸŸ */
        .test-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
        }

        .test-area h2 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .test-area p {
            font-size: 18px;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
        }

        /* è°ƒè¯•ä¿¡æ¯ */
        .debug-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 11px;
            z-index: 100;
            max-width: 400px;
        }

        .debug-info .line {
            margin: 2px 0;
        }
    </style>
</head>
<body>
    <!-- å¤´éƒ¨ -->
    <div class="header">
        <h1>ğŸ“¦ GitHub ä¸‹è½½å™¨æŒ‰é’®åŸå‹</h1>
        <p>æ‹–æ‹½ã€åœé ã€åŠéšè—æ•ˆæœæµ‹è¯• | æŠ€æœ¯éªŒè¯å’Œæ¦‚å¿µè¯æ˜å·¥å…·</p>
    </div>

    <!-- ä¿¡æ¯é¢æ¿ -->
    <div class="info-panel" id="infoPanel">
        <h3>ğŸ“Š å®æ—¶çŠ¶æ€</h3>
        <div class="info-item">
            æŒ‰é’®ä½ç½®: <span class="info-value" id="btnPosition">x: 0, y: 0</span>
        </div>
        <div class="info-item">
            åœé çŠ¶æ€: <span class="info-value" id="dockedStatus">å¦</span>
        </div>
        <div class="info-item">
            åœé è¾¹ç¼˜: <span class="info-value" id="edgeType">æ— </span>
        </div>
        <div class="info-item">
            éšè—çŠ¶æ€: <span class="info-value" id="hiddenStatus">å¦</span>
        </div>
        <div class="info-item">
            é¢æ¿æ–¹å‘: <span class="info-value" id="panelDirection">-</span>
        </div>
        <div class="info-item">
            è·ç¦»è¾¹ç¼˜: <span class="info-value" id="edgeDistance">-</span>
        </div>
    </div>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="controls" id="controls">
        <h3>ğŸ® æµ‹è¯•æ§åˆ¶</h3>
        <button onclick="resetButton()">ğŸ”„ é‡ç½®æŒ‰é’®ä½ç½®</button>
        <button onclick="toggleAutoHide()">â±ï¸ åˆ‡æ¢è‡ªåŠ¨éšè—</button>
        <button onclick="showCurrentState()">ğŸ“Š æŸ¥çœ‹å½“å‰çŠ¶æ€</button>
        <button onclick="exportState()">ğŸ“¤ å¯¼å‡ºçŠ¶æ€</button>
        <button onclick="importState()">ğŸ“¥ å¯¼å…¥çŠ¶æ€</button>
        <button onclick="clearState()" class="danger">ğŸ—‘ï¸ æ¸…é™¤å­˜å‚¨</button>
        
        <h3 style="margin-top: 20px;">ğŸ“ æ—¥å¿—ç®¡ç†</h3>
        <button onclick="copyLogs()">ğŸ“‹ å¤åˆ¶æ—¥å¿—</button>
        <button onclick="downloadLogs()">ğŸ’¾ å¯¼å‡ºæ—¥å¿—</button>
    </div>

    <!-- æµ‹è¯•åŒºåŸŸ -->
    <div class="test-area">
        <h2>æ‹–æ‹½æŒ‰é’®åˆ°ä»»æ„ä½ç½®</h2>
        <p>å°†æŒ‰é’®æ‹–åˆ°çª—å£è¾¹ç¼˜æµ‹è¯•åœé æ•ˆæœ</p>
        <p>è·ç¦»è¾¹ç¼˜ â‰¤ 20px æ—¶è‡ªåŠ¨å¸é™„</p>
        <p>é¼ æ ‡æ‚¬åœåœ¨åœé æŒ‰é’®ä¸Šå±•å¼€</p>
    </div>

    <!-- è°ƒè¯•ä¿¡æ¯ -->
    <div class="debug-info" id="debugInfo">
        <div class="line">ç­‰å¾…æ“ä½œ...</div>
    </div>

    <!-- ğŸ“¦ æŒ‰é’® -->
    <button class="toggle-btn" id="toggleBtn" title="ç‚¹å‡»æ‰“å¼€é¢æ¿">ğŸ“¦</button>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel" id="controlPanel">
        <div class="panel-header">
            <div class="title">GitHub ä¸‹è½½å™¨</div>
            <button class="close-btn" onclick="togglePanel()">âœ•</button>
        </div>
        <div class="panel-content">
            <p><strong>ğŸ¯ åŠŸèƒ½è¯´æ˜</strong></p>
            <ul>
                <li><strong>æ‹–æ‹½ç§»åŠ¨</strong>ï¼šæŒ‰ä½æŒ‰é’®ä»»æ„ä½ç½®æ‹–åŠ¨</li>
                <li><strong>è¾¹ç¼˜å¸é™„</strong>ï¼šè·ç¦»è¾¹ç¼˜ â‰¤ 20px è‡ªåŠ¨å¸é™„</li>
                <li><strong>åŠéšè—</strong>ï¼šåœé åå»¶è¿Ÿ 400ms éšè— 50%</li>
                <li><strong>æ™ºèƒ½å±•å¼€</strong>ï¼šé¼ æ ‡æ‚¬åœæ—¶ç«‹å³å®Œæ•´æ˜¾ç¤º</li>
                <li><strong>é¢æ¿è·Ÿéš</strong>ï¼šé¢æ¿æ™ºèƒ½é€‰æ‹©å±•å¼€æ–¹å‘</li>
            </ul>
            <p><strong>âš™ï¸ é…ç½®</strong></p>
            <ul>
                <li>å¸é™„é˜ˆå€¼ï¼š20px</li>
                <li>éšè—å»¶è¿Ÿï¼š400ms</li>
                <li>éšè—æ¯”ä¾‹ï¼š50%</li>
                <li>åœé è¾¹ç¼˜ï¼šå·¦ã€å³</li>
            </ul>
            <p><strong>ğŸ’¡ æç¤º</strong></p>
            <p>å°è¯•å°†æŒ‰é’®æ‹–åˆ°å·¦è¾¹ç¼˜æˆ–å³è¾¹ç¼˜ï¼Œè§‚å¯Ÿå¸é™„å’ŒåŠéšè—æ•ˆæœã€‚ç‚¹å‡»æŒ‰é’®æ‰“å¼€é¢æ¿ï¼Œè§‚å¯Ÿæ™ºèƒ½å±•å¼€æ–¹å‘ã€‚</p>
        </div>
    </div>

    <script>
        // ==================== é…ç½® ====================
        const CONFIG = {
            // å¸é™„é˜ˆå€¼ï¼ˆåƒç´ ï¼‰
            SNAP_THRESHOLD: 20,
            
            // éšè—å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
            HIDE_DELAY: 400,
            
            // åŠ¨ç”»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰
            ANIMATION_DURATION: 200,
            
            // éšè—æ¯”ä¾‹ï¼ˆ0-1ï¼‰
            HIDE_RATIO: 0.5,
            
            // æŒ‰é’®å°ºå¯¸
            BUTTON_SIZE: 50,
            
            // é¢æ¿å°ºå¯¸
            PANEL_WIDTH: 300,
            PANEL_HEIGHT: 400,
            
            // é¢æ¿ä¸æŒ‰é’®çš„é—´è·
            PANEL_GAP: 10,
            
            // æ”¯æŒçš„åœé è¾¹ç¼˜
            SUPPORTED_EDGES: ['left', 'right']
        };

        // ==================== çŠ¶æ€ç®¡ç† ====================
        const state = {
            // æŒ‰é’®ä½ç½®
            x: null,
            y: null,

            // åœé çŠ¶æ€
            docked: false,
            edge: null,

            // éšè—çŠ¶æ€
            hidden: false,

            // æ‹–æ‹½çŠ¶æ€
            isDragging: false,
            hasDragged: false,  // â† æ–°å¢ï¼šæ˜¯å¦å‘ç”Ÿäº†æœ‰æ•ˆæ‹–æ‹½ä½ç§»
            dragStartX: 0,
            dragStartY: 0,
            buttonStartX: 0,
            buttonStartY: 0,

            // é¼ æ ‡çŠ¶æ€
            isMouseOver: false,  // â† æ–°å¢ï¼šé¼ æ ‡æ˜¯å¦åœ¨æŒ‰é’®ä¸Š

            // é¢æ¿çŠ¶æ€
            panelOpen: false,

            // è‡ªåŠ¨éšè—å¼€å…³
            autoHideEnabled: true,

            // è®¡æ—¶å™¨
            hideTimer: null,

            // æ‰€æœ‰æ—¥å¿—è®°å½•ï¼ˆç”¨äºå¯¼å‡ºï¼‰
            allLogs: []
        };        // ==================== DOM å…ƒç´  ====================
        const toggleBtn = document.getElementById('toggleBtn');
        const controlPanel = document.getElementById('controlPanel');
        const debugInfo = document.getElementById('debugInfo');

        // ==================== åˆå§‹åŒ– ====================
        function init() {
            log('åˆå§‹åŒ–åŸå‹...');
            
            // åŠ è½½ä¿å­˜çš„çŠ¶æ€
            loadState();
            
            // åº”ç”¨çŠ¶æ€
            applyState();
            
            // ç»‘å®šäº‹ä»¶
            bindEvents();
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
            
            log('åˆå§‹åŒ–å®Œæˆ');
        }

        // ==================== äº‹ä»¶ç»‘å®š ====================
        function bindEvents() {
            // é¼ æ ‡äº‹ä»¶
            toggleBtn.addEventListener('mousedown', onMouseDown);
            toggleBtn.addEventListener('mouseup', onMouseUp);
            toggleBtn.addEventListener('mouseenter', onMouseEnter);
            toggleBtn.addEventListener('mouseleave', onMouseLeave);
            
            // è§¦æ‘¸äº‹ä»¶
            toggleBtn.addEventListener('touchstart', onTouchStart, { passive: false });
            toggleBtn.addEventListener('touchmove', onTouchMove, { passive: false });
            toggleBtn.addEventListener('touchend', onTouchEnd);
            
            // å…¨å±€äº‹ä»¶
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
            document.addEventListener('touchmove', onTouchMove, { passive: false });
            document.addEventListener('touchend', onTouchEnd);
            
            // çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', onWindowResize);
            
            // æŒ‰é’®ç‚¹å‡»
            toggleBtn.addEventListener('click', onButtonClick);
        }

        // ==================== æ‹–æ‹½å¤„ç† ====================
        // æ‹–æ‹½åˆ¤å®šé˜ˆå€¼ï¼ˆåƒç´ ï¼‰ï¼šè¶…è¿‡æ­¤å€¼è®¤ä¸ºæ˜¯æ‹–æ‹½ï¼Œå¦åˆ™æ˜¯ç‚¹å‡»
        const DRAG_THRESHOLD = 3;

        function onMouseDown(e) {
            if (e.button !== 0) return; // åªå“åº”å·¦é”®

            state.isDragging = true;
            state.hasDragged = false;  // â† é‡ç½®æ‹–æ‹½æ ‡å¿—
            state.dragStartX = e.clientX;
            state.dragStartY = e.clientY;
            state.buttonStartX = toggleBtn.offsetLeft;
            state.buttonStartY = toggleBtn.offsetTop;

            toggleBtn.classList.add('dragging');

            // ä»…å½“æŒ‰é’®æœªåœé ä¸”é¢æ¿æœªæ‰“å¼€æ—¶æ‰æ¸…é™¤åœé çŠ¶æ€
            // åœé çŠ¶æ€ä¸‹ç‚¹å‡»æŒ‰é’®æ˜¯ä¸ºäº†æ‰“å¼€/å…³é—­é¢æ¿ï¼Œä¸åº”æ¸…é™¤åœé 
            if (!state.docked && !state.panelOpen) {
                clearDocked();
            }

            // å¦‚æœé¢æ¿æ‰“å¼€ï¼Œå®æ—¶æ›´æ–°é¢æ¿ä½ç½®
            if (state.panelOpen) {
                updatePanelPosition();
            }

            log('å¼€å§‹æ‹–æ‹½/ç‚¹å‡»æ£€æµ‹');
        }

        function onMouseMove(e) {
            if (!state.isDragging) return;

            e.preventDefault();

            // è®¡ç®—ä½ç§»
            const deltaX = e.clientX - state.dragStartX;
            const deltaY = e.clientY - state.dragStartY;

            // â† æ£€æµ‹æ˜¯å¦å‘ç”Ÿäº†æœ‰æ•ˆæ‹–æ‹½ï¼ˆè¶…è¿‡é˜ˆå€¼ï¼‰
            if (!state.hasDragged) {
                const absDeltaX = Math.abs(deltaX);
                const absDeltaY = Math.abs(deltaY);
                if (absDeltaX > DRAG_THRESHOLD || absDeltaY > DRAG_THRESHOLD) {
                    state.hasDragged = true;
                    log(`æ£€æµ‹åˆ°æœ‰æ•ˆæ‹–æ‹½: Î”X=${absDeltaX.toFixed(1)}px, Î”Y=${absDeltaY.toFixed(1)}px`);
                }
            }

            // è®¡ç®—æ–°ä½ç½®
            let newX = state.buttonStartX + deltaX;
            let newY = state.buttonStartY + deltaY;

            // é™åˆ¶åœ¨å¯è§†åŒºåŸŸå†…
            const clamped = clampPosition(newX, newY);

            // ä½¿ç”¨ left/top å®šä½ï¼Œä¸ä½¿ç”¨ transform
            toggleBtn.style.left = `${clamped.x}px`;
            toggleBtn.style.top = `${clamped.y}px`;
            toggleBtn.style.right = 'auto';
            toggleBtn.style.bottom = 'auto';

            // æ›´æ–°çŠ¶æ€
            state.x = clamped.x;
            state.y = clamped.y;

            // æ£€æµ‹è¾¹ç¼˜å¸é™„
            checkEdgeSnap(clamped.x, clamped.y);

            // å¦‚æœé¢æ¿æ‰“å¼€ï¼Œå®æ—¶æ›´æ–°é¢æ¿ä½ç½®
            if (state.panelOpen) {
                updatePanelPosition();
            }

            updateDisplay();
        }

        function onMouseUp(e) {
            if (!state.isDragging) return;

            state.isDragging = false;
            toggleBtn.classList.remove('dragging');

            // ç¡®è®¤è¾¹ç¼˜å¸é™„
            if (state.edge) {
                log(`ğŸ¯ æ‹–æ‹½ç»“æŸï¼Œæ£€æµ‹åˆ°åœé è¾¹ç¼˜: ${state.edge}`);
                applyDocked(state.edge);
            } else {
                log('ğŸ“ æ‹–æ‹½ç»“æŸï¼Œæœªæ£€æµ‹åˆ°åœé è¾¹ç¼˜');
            }

            // ä¿å­˜çŠ¶æ€
            saveState();

            // â† å»¶è¿Ÿé‡ç½® hasDraggedï¼Œç¡®ä¿ click äº‹ä»¶èƒ½è¯»å–åˆ°è¯¥å€¼
            setTimeout(() => {
                state.hasDragged = false;
            }, 0);

            log(`âœ… æ‹–æ‹½/ç‚¹å‡»ç»“æŸ (æ˜¯å¦æ‹–æ‹½: ${state.hasDragged})`);
        }

        // ==================== è§¦æ‘¸äº‹ä»¶å¤„ç† ====================
        function onTouchStart(e) {
            if (e.touches.length !== 1) return;

            e.preventDefault();

            const touch = e.touches[0];
            state.isDragging = true;
            state.hasDragged = false;  // â† é‡ç½®æ‹–æ‹½æ ‡å¿—
            state.dragStartX = touch.clientX;
            state.dragStartY = touch.clientY;
            state.buttonStartX = toggleBtn.offsetLeft;
            state.buttonStartY = toggleBtn.offsetTop;

            toggleBtn.classList.add('dragging');

            clearDocked();

            if (state.panelOpen) {
                updatePanelPosition();
            }

            log('è§¦æ‘¸å¼€å§‹æ‹–æ‹½/ç‚¹å‡»æ£€æµ‹');
        }

        function onTouchMove(e) {
            if (!state.isDragging || e.touches.length !== 1) return;

            e.preventDefault();

            const touch = e.touches[0];

            // è®¡ç®—ä½ç§»
            const deltaX = touch.clientX - state.dragStartX;
            const deltaY = touch.clientY - state.dragStartY;

            // â† æ£€æµ‹æ˜¯å¦å‘ç”Ÿäº†æœ‰æ•ˆæ‹–æ‹½
            if (!state.hasDragged) {
                const absDeltaX = Math.abs(deltaX);
                const absDeltaY = Math.abs(deltaY);
                if (absDeltaX > DRAG_THRESHOLD || absDeltaY > DRAG_THRESHOLD) {
                    state.hasDragged = true;
                }
            }

            let newX = state.buttonStartX + deltaX;
            let newY = state.buttonStartY + deltaY;

            const clamped = clampPosition(newX, newY);

            toggleBtn.style.left = `${clamped.x}px`;
            toggleBtn.style.top = `${clamped.y}px`;
            toggleBtn.style.right = 'auto';
            toggleBtn.style.bottom = 'auto';

            state.x = clamped.x;
            state.y = clamped.y;

            checkEdgeSnap(clamped.x, clamped.y);

            if (state.panelOpen) {
                updatePanelPosition();
            }

            updateDisplay();
        }

        function onTouchEnd(e) {
            if (!state.isDragging) return;

            state.isDragging = false;
            toggleBtn.classList.remove('dragging');

            if (state.edge) {
                applyDocked(state.edge);
            }

            saveState();

            // â† å»¶è¿Ÿé‡ç½® hasDragged
            setTimeout(() => {
                state.hasDragged = false;
            }, 0);

            log(`è§¦æ‘¸ç»“æŸ (æ˜¯å¦æ‹–æ‹½: ${state.hasDragged})`);
        }

        // ==================== è¾¹ç¼˜å¸é™„ ====================
        function checkEdgeSnap(x, y) {
            const viewport = getViewport();
            
            // è®¡ç®—è·ç¦»å„è¾¹ç¼˜çš„è·ç¦»
            const distances = {
                left: x,
                right: viewport.width - x - CONFIG.BUTTON_SIZE,
                top: y,
                bottom: viewport.height - y - CONFIG.BUTTON_SIZE
            };
            
            // æ£€æŸ¥æ˜¯å¦åœ¨å¸é™„é˜ˆå€¼å†…
            let snappedEdge = null;
            
            for (const edge of CONFIG.SUPPORTED_EDGES) {
                if (distances[edge] <= CONFIG.SNAP_THRESHOLD) {
                    snappedEdge = edge;
                    break;
                }
            }
            
            // æ›´æ–°çŠ¶æ€
            state.edge = snappedEdge;
            
            // å¦‚æœæ£€æµ‹åˆ°è¾¹ç¼˜ï¼Œæ˜¾ç¤ºè§†è§‰åé¦ˆ
            if (snappedEdge) {
                log(`æ£€æµ‹åˆ°è¾¹ç¼˜: ${snappedEdge} (è·ç¦»: ${distances[snappedEdge].toFixed(1)}px)`);
            }
            
            return snappedEdge;
        }

        function applyDocked(edge) {
            state.docked = true;
            state.edge = edge;
            
            toggleBtn.classList.add('docked');
            
            // åº”ç”¨åœé ä½ç½®
            switch (edge) {
                case 'left':
                    toggleBtn.style.left = '0';
                    toggleBtn.style.top = `${state.y}px`;
                    toggleBtn.style.right = 'auto';
                    toggleBtn.style.bottom = 'auto';
                    break;
                case 'right':
                    toggleBtn.style.right = '0';
                    toggleBtn.style.top = `${state.y}px`;
                    toggleBtn.style.left = 'auto';
                    toggleBtn.style.bottom = 'auto';
                    break;
            }
            
            // å»¶è¿Ÿå¯åŠ¨è‡ªåŠ¨éšè—ï¼Œç¡®ä¿é¼ æ ‡ç¦»å¼€æŒ‰é’®åæ‰å¼€å§‹è®¡æ—¶
            // è¿™æ ·å¯ä»¥é¿å…æ‹–æ‹½æ—¶é¼ æ ‡ä»åœ¨æŒ‰é’®ä¸Šå¯¼è‡´è®¡æ—¶å™¨è¢«å–æ¶ˆ
            if (state.autoHideEnabled) {
                // å…ˆå–æ¶ˆç°æœ‰çš„è®¡æ—¶å™¨
                cancelHide();
                
                // å»¶è¿Ÿ 100ms åå¯åŠ¨éšè—è®¡æ—¶å™¨
                // è¿™ç»™é¼ æ ‡äº‹ä»¶å¤„ç†ä¸€äº›æ—¶é—´ï¼Œç¡®ä¿çŠ¶æ€ç¨³å®š
                setTimeout(() => {
                    if (state.docked && !state.panelOpen) {
                        scheduleHide();
                    }
                }, 100);
            }
            
            log(`åœé åˆ°: ${edge}`);
            updateDisplay();
        }

        function clearDocked() {
            state.docked = false;
            state.edge = null;
            state.hidden = false;
            
            toggleBtn.classList.remove('docked');
            toggleBtn.style.transform = 'translateX(0) translateY(0)';
            
            cancelHide();
            
            log('æ¸…é™¤åœé çŠ¶æ€');
            updateDisplay();
        }

        // ==================== åŠéšè—æ•ˆæœ ====================
        function scheduleHide() {
            if (!state.autoHideEnabled) {
                log('è‡ªåŠ¨éšè—å·²ç¦ç”¨ï¼Œè·³è¿‡å®‰æ’éšè—');
                return;
            }
            
            if (!state.docked) {
                log('æŒ‰é’®æœªåœé ï¼Œè·³è¿‡å®‰æ’éšè—');
                return;
            }
            
            if (state.panelOpen) {
                log('é¢æ¿å·²æ‰“å¼€ï¼Œè·³è¿‡å®‰æ’éšè—');
                return;
            }
            
            cancelHide();
            
            state.hideTimer = setTimeout(() => {
                hideButton();
            }, CONFIG.HIDE_DELAY);
            
            log(`âœ… å®‰æ’éšè— (${CONFIG.HIDE_DELAY}ms å) - åœé è¾¹ç¼˜: ${state.edge}`);
        }

        function cancelHide() {
            if (state.hideTimer) {
                clearTimeout(state.hideTimer);
                state.hideTimer = null;
                log('å–æ¶ˆéšè—');
            }
        }

        function hideButton() {
            if (state.hidden || !state.docked) return;
            
            state.hidden = true;
            
            toggleBtn.style.transition = `transform ${CONFIG.ANIMATION_DURATION}ms ease`;
            
            switch (state.edge) {
                case 'left':
                    toggleBtn.style.transform = `translateX(-${CONFIG.BUTTON_SIZE * CONFIG.HIDE_RATIO}px)`;
                    break;
                case 'right':
                    toggleBtn.style.transform = `translateX(${CONFIG.BUTTON_SIZE * CONFIG.HIDE_RATIO}px)`;
                    break;
            }
            
            log('æŒ‰é’®å·²éšè—');
            updateDisplay();
        }

        function showButton() {
            if (!state.hidden) return;
            
            state.hidden = false;
            
            toggleBtn.style.transform = 'translateX(0) translateY(0)';
            
            log('æŒ‰é’®å·²å±•å¼€');
            updateDisplay();
        }

        // ==================== é¼ æ ‡æ‚¬åœå¤„ç† ====================
        function onMouseEnter() {
            state.isMouseOver = true;  // â† è®°å½•é¼ æ ‡çŠ¶æ€

            if (!state.docked) {
                log('é¼ æ ‡è¿›å…¥ï¼šæŒ‰é’®æœªåœé ï¼Œå¿½ç•¥');
                return;
            }

            log(`ğŸ–±ï¸ é¼ æ ‡è¿›å…¥åœé æŒ‰é’® (è¾¹ç¼˜: ${state.edge}, éšè—çŠ¶æ€: ${state.hidden})`);

            // å–æ¶ˆéšè—è®¡æ—¶å™¨
            cancelHide();

            // ç«‹å³å±•å¼€
            showButton();
        }

        function onMouseLeave() {
            state.isMouseOver = false;  // â† è®°å½•é¼ æ ‡çŠ¶æ€

            if (!state.docked) {
                log('é¼ æ ‡ç¦»å¼€ï¼šæŒ‰é’®æœªåœé ï¼Œå¿½ç•¥');
                return;
            }

            log(`ğŸ–±ï¸ é¼ æ ‡ç¦»å¼€åœé æŒ‰é’® (è¾¹ç¼˜: ${state.edge}, é¢æ¿æ‰“å¼€: ${state.panelOpen})`);

            // å¦‚æœé¢æ¿æ‰“å¼€ï¼Œä¸éšè—
            if (state.panelOpen) {
                log('é¢æ¿å·²æ‰“å¼€ï¼Œä¸å®‰æ’éšè—');
                return;
            }

            // é‡æ–°å®‰æ’éšè—
            if (state.autoHideEnabled) {
                scheduleHide();
            }
        }

        // ==================== é¢æ¿æ§åˆ¶ ====================
        function onButtonClick(e) {
            // â† ä½¿ç”¨ä½ç§»æ£€æµ‹æ³•ï¼šå¦‚æœå‘ç”Ÿäº†æœ‰æ•ˆæ‹–æ‹½ï¼Œä¸æ‰“å¼€é¢æ¿
            if (state.hasDragged) {
                e.preventDefault();
                e.stopPropagation();
                log('ğŸ–±ï¸ ç‚¹å‡»äº‹ä»¶ï¼šå‘ç”Ÿäº†æ‹–æ‹½ï¼Œå¿½ç•¥');
                return;
            }

            // æœ‰æ•ˆç‚¹å‡»ï¼šåˆ‡æ¢é¢æ¿çŠ¶æ€
            log('ğŸ–±ï¸ ç‚¹å‡»äº‹ä»¶ï¼šæœ‰æ•ˆç‚¹å‡»ï¼Œåˆ‡æ¢é¢æ¿çŠ¶æ€');
            togglePanel();
        }

        function togglePanel() {
            if (state.panelOpen) {
                closePanel();
            } else {
                openPanel();
            }
        }

        function openPanel() {
            state.panelOpen = true;
            controlPanel.style.display = 'block';
            
            // å–æ¶ˆéšè—
            cancelHide();
            showButton();
            
            // è®¡ç®—å¹¶åº”ç”¨é¢æ¿ä½ç½®
            updatePanelPosition();
            
            log('æ‰“å¼€é¢æ¿');
            updateDisplay();
        }

        function closePanel() {
            state.panelOpen = false;
            controlPanel.style.display = 'none';

            // å¦‚æœåœé ä¸”è‡ªåŠ¨éšè—å¯ç”¨ï¼Œä¸”é¼ æ ‡ä¸åœ¨æŒ‰é’®ä¸Šï¼Œæ‰å®‰æ’éšè—
            // å¦‚æœé¼ æ ‡åœ¨æŒ‰é’®ä¸Šï¼Œè®© onMouseLeave å¤„ç†éšè—
            if (state.docked && state.autoHideEnabled && !state.isMouseOver) {
                scheduleHide();
                log('å…³é—­é¢æ¿ï¼šé¼ æ ‡ä¸åœ¨æŒ‰é’®ä¸Šï¼Œç«‹å³å®‰æ’éšè—');
            } else if (state.docked && state.autoHideEnabled && state.isMouseOver) {
                log('å…³é—­é¢æ¿ï¼šé¼ æ ‡åœ¨æŒ‰é’®ä¸Šï¼Œç­‰å¾… mouseleave æ—¶éšè—');
            }

            log('å…³é—­é¢æ¿');
            updateDisplay();
        }

        function updatePanelPosition() {
            if (!state.panelOpen) return;
            
            const direction = calculatePanelDirection();
            
            let panelLeft, panelTop;
            
            // è·å–æŒ‰é’®ä½ç½®
            const btnRect = toggleBtn.getBoundingClientRect();
            
            // æ ¹æ®æ–¹å‘è®¡ç®—é¢æ¿ä½ç½®
            switch (direction) {
                case 'up-left':
                    panelLeft = btnRect.left - CONFIG.PANEL_WIDTH - CONFIG.PANEL_GAP;
                    panelTop = btnRect.top - CONFIG.PANEL_HEIGHT - CONFIG.PANEL_GAP;
                    break;
                case 'up-right':
                    panelLeft = btnRect.right + CONFIG.PANEL_GAP;
                    panelTop = btnRect.top - CONFIG.PANEL_HEIGHT - CONFIG.PANEL_GAP;
                    break;
                case 'down-left':
                    panelLeft = btnRect.left - CONFIG.PANEL_WIDTH - CONFIG.PANEL_GAP;
                    panelTop = btnRect.bottom + CONFIG.PANEL_GAP;
                    break;
                case 'down-right':
                    panelLeft = btnRect.right + CONFIG.PANEL_GAP;
                    panelTop = btnRect.bottom + CONFIG.PANEL_GAP;
                    break;
                default:
                    // é»˜è®¤ï¼šæŒ‰é’®å·¦ä¾§
                    panelLeft = btnRect.left - CONFIG.PANEL_WIDTH - CONFIG.PANEL_GAP;
                    panelTop = btnRect.top;
            }
            
            // é™åˆ¶åœ¨å¯è§†åŒºåŸŸå†…
            const clamped = clampPanelPosition(panelLeft, panelTop);
            
            controlPanel.style.left = `${clamped.x}px`;
            controlPanel.style.top = `${clamped.y}px`;
            controlPanel.style.right = 'auto';
            controlPanel.style.bottom = 'auto';
            
            state.panelDirection = direction;
            
            log(`é¢æ¿æ–¹å‘: ${direction}`);
            updateDisplay();
        }

        function calculatePanelDirection() {
            const btnRect = toggleBtn.getBoundingClientRect();
            const viewport = getViewport();
            
            // æŒ‰é’®ä¸­å¿ƒç‚¹
            const centerX = btnRect.left + btnRect.width / 2;
            const centerY = btnRect.top + btnRect.height / 2;
            
            // è§†å£ä¸­å¿ƒç‚¹
            const viewCenterX = viewport.width / 2;
            const viewCenterY = viewport.height / 2;
            
            // åˆ¤æ–­è±¡é™
            const inLeftHalf = centerX < viewCenterX;
            const inTopHalf = centerY < viewCenterY;
            
            // è®¡ç®—å¯ç”¨ç©ºé—´
            const space = {
                left: btnRect.left,
                right: viewport.width - btnRect.right,
                top: btnRect.top,
                bottom: viewport.height - btnRect.bottom
            };
            
            // æ°´å¹³æ–¹å‘é€‰æ‹©
            let horizontal;
            if (inLeftHalf) {
                horizontal = space.right >= CONFIG.PANEL_WIDTH ? 'right' : 'left';
            } else {
                horizontal = space.left >= CONFIG.PANEL_WIDTH ? 'left' : 'right';
            }
            
            // å‚ç›´æ–¹å‘é€‰æ‹©
            let vertical;
            if (inTopHalf) {
                vertical = space.bottom >= CONFIG.PANEL_HEIGHT ? 'down' : 'up';
            } else {
                vertical = space.top >= CONFIG.PANEL_HEIGHT ? 'up' : 'down';
            }
            
            return `${vertical}-${horizontal}`;
        }

        // ==================== ä½ç½®é™åˆ¶ ====================
        function clampPosition(x, y) {
            const viewport = getViewport();
            
            return {
                x: Math.max(0, Math.min(x, viewport.width - CONFIG.BUTTON_SIZE)),
                y: Math.max(0, Math.min(y, viewport.height - CONFIG.BUTTON_SIZE))
            };
        }

        function clampPanelPosition(x, y) {
            const viewport = getViewport();
            
            return {
                x: Math.max(0, Math.min(x, viewport.width - CONFIG.PANEL_WIDTH)),
                y: Math.max(0, Math.min(y, viewport.height - CONFIG.PANEL_HEIGHT))
            };
        }

        function getViewport() {
            return {
                width: window.innerWidth,
                height: window.innerHeight
            };
        }

        // ==================== çª—å£å¤§å°å˜åŒ– ====================
        function onWindowResize() {
            log('çª—å£å¤§å°å˜åŒ–');
            
            // æ£€æŸ¥æŒ‰é’®æ˜¯å¦åœ¨å¯è§†åŒºåŸŸå†…
            const btnRect = toggleBtn.getBoundingClientRect();
            const viewport = getViewport();
            
            if (
                btnRect.left < 0 ||
                btnRect.right > viewport.width ||
                btnRect.top < 0 ||
                btnRect.bottom > viewport.height
            ) {
                // æŒ‰é’®è¶…å‡ºè¾¹ç•Œï¼Œé‡ç½®åˆ°é»˜è®¤ä½ç½®
                log('æŒ‰é’®è¶…å‡ºå¯è§†åŒºåŸŸï¼Œé‡ç½®åˆ°é»˜è®¤ä½ç½®');
                resetButton();
            }
            
            // æ›´æ–°é¢æ¿ä½ç½®
            if (state.panelOpen) {
                updatePanelPosition();
            }
            
            updateDisplay();
        }

        // ==================== çŠ¶æ€ç®¡ç† ====================
        function saveState() {
            const stateToSave = {
                x: state.x,
                y: state.y,
                docked: state.docked,
                edge: state.edge,
                autoHideEnabled: state.autoHideEnabled
            };
            
            localStorage.setItem('buttonState', JSON.stringify(stateToSave));
            log('çŠ¶æ€å·²ä¿å­˜');
        }

        function loadState() {
            try {
                const savedState = localStorage.getItem('buttonState');
                if (savedState) {
                    const parsed = JSON.parse(savedState);
                    Object.assign(state, parsed);
                    log('çŠ¶æ€å·²åŠ è½½');
                }
            } catch (err) {
                log('åŠ è½½çŠ¶æ€å¤±è´¥: ' + err.message);
            }
        }

        function applyState() {
            // åº”ç”¨ä½ç½®
            if (state.x !== null && state.y !== null) {
                toggleBtn.style.left = `${state.x}px`;
                toggleBtn.style.top = `${state.y}px`;
                toggleBtn.style.right = 'auto';
                toggleBtn.style.bottom = 'auto';
            }
            
            // åº”ç”¨åœé çŠ¶æ€
            if (state.docked && state.edge) {
                applyDocked(state.edge);
            }
            
            log('çŠ¶æ€å·²åº”ç”¨');
        }

        // ==================== æ§åˆ¶å‡½æ•° ====================
        function resetButton() {
            clearState();
            
            state.x = null;
            state.y = null;
            state.docked = false;
            state.edge = null;
            state.hidden = false;
            
            toggleBtn.style.left = 'auto';
            toggleBtn.style.top = 'auto';
            toggleBtn.style.right = '20px';
            toggleBtn.style.bottom = '30px';
            toggleBtn.style.transform = 'translateX(0) translateY(0)';
            
            closePanel();
            
            log('æŒ‰é’®å·²é‡ç½®');
            updateDisplay();
        }

        function toggleAutoHide() {
            state.autoHideEnabled = !state.autoHideEnabled;
            
            if (state.autoHideEnabled) {
                alert('âœ… è‡ªåŠ¨éšè—å·²å¯ç”¨');
                if (state.docked) {
                    scheduleHide();
                }
            } else {
                alert('âŒ è‡ªåŠ¨éšè—å·²ç¦ç”¨');
                cancelHide();
                showButton();
            }
            
            log(`è‡ªåŠ¨éšè—: ${state.autoHideEnabled ? 'å¯ç”¨' : 'ç¦ç”¨'}`);
            updateDisplay();
        }

        function showCurrentState() {
            const info = `
ğŸ“Š å½“å‰æŒ‰é’®çŠ¶æ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ä½ç½®:
  X: ${state.x !== null ? state.x + 'px' : 'æœªè®¾ç½®'}
  Y: ${state.y !== null ? state.y + 'px' : 'æœªè®¾ç½®'}

åœé :
  æ˜¯å¦åœé : ${state.docked ? 'æ˜¯' : 'å¦'}
  åœé è¾¹ç¼˜: ${state.edge || 'æ— '}
  æ˜¯å¦éšè—: ${state.hidden ? 'æ˜¯' : 'å¦'}

é¢æ¿:
  æ˜¯å¦æ‰“å¼€: ${state.panelOpen ? 'æ˜¯' : 'å¦'}
  å±•å¼€æ–¹å‘: ${state.panelDirection || '-'}

é…ç½®:
  è‡ªåŠ¨éšè—: ${state.autoHideEnabled ? 'å¯ç”¨' : 'ç¦ç”¨'}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `.trim();
            
            alert(info);
        }

        function exportState() {
            const stateToExport = {
                x: state.x,
                y: state.y,
                docked: state.docked,
                edge: state.edge,
                autoHideEnabled: state.autoHideEnabled
            };
            
            const json = JSON.stringify(stateToExport, null, 2);
            
            // å¤åˆ¶åˆ°å‰ªè´´æ¿
            navigator.clipboard.writeText(json).then(() => {
                alert('âœ… çŠ¶æ€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\n\n' + json);
            }).catch(err => {
                alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š\n\n' + json);
            });
        }

        function importState() {
            const json = prompt('è¯·ç²˜è´´çŠ¶æ€ JSONï¼š');
            
            if (!json) {
                log('ç”¨æˆ·å–æ¶ˆäº†å¯¼å…¥æ“ä½œ');
                return;
            }
            
            try {
                const importedState = JSON.parse(json);
                
                // éªŒè¯
                if (!validateState(importedState)) {
                    throw new Error('çŠ¶æ€æ ¼å¼ä¸æ­£ç¡®');
                }
                
                // åº”ç”¨
                Object.assign(state, importedState);
                applyState();
                saveState();
                
                alert('âœ… çŠ¶æ€å·²å¯¼å…¥ï¼');
                log('çŠ¶æ€å·²å¯¼å…¥');
            } catch (err) {
                alert('âŒ å¯¼å…¥å¤±è´¥ï¼š\n\n' + err.message);
            }
        }

        function clearState() {
            localStorage.removeItem('buttonState');
            log('å­˜å‚¨å·²æ¸…é™¤');
        }

        function validateState(s) {
            return typeof s === 'object' && s !== null;
        }

        // ==================== æ—¥å¿—å¯¼å‡º ====================
        function getLogsText() {
            // ä» allLogs æ•°ç»„è·å–æ‰€æœ‰æ—¥å¿—è®°å½•
            return state.allLogs.join('\n');
        }

        function copyLogs() {
            const logs = getLogsText();

            if (logs.trim() === '') {
                alert('âŒ æ²¡æœ‰æ—¥å¿—å¯å¤åˆ¶');
                return;
            }

            navigator.clipboard.writeText(logs).then(() => {
                alert('âœ… æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                log('æ—¥å¿—å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }).catch(err => {
                alert('âŒ å¤åˆ¶å¤±è´¥ï¼š' + err.message);
            });
        }

        function downloadLogs() {
            const logs = getLogsText();

            if (logs.trim() === '') {
                alert('âŒ æ²¡æœ‰æ—¥å¿—å¯å¯¼å‡º');
                return;
            }

            try {
                const blob = new Blob([logs], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `button-prototype-logs-${new Date().toISOString().slice(0,19).replace(/:/g,'-')}.txt`;
                a.click();
                URL.revokeObjectURL(url);
                log('æ—¥å¿—å·²å¯¼å‡ºä¸ºæ–‡ä»¶');
            } catch (err) {
                alert('âŒ å¯¼å‡ºå¤±è´¥ï¼š' + err.message);
            }
        }

        // ==================== æ˜¾ç¤ºæ›´æ–° ====================
        function updateDisplay() {
            // æ›´æ–°ä¿¡æ¯é¢æ¿
            document.getElementById('btnPosition').textContent = 
                `x: ${state.x !== null ? state.x : '-'}, y: ${state.y !== null ? state.y : '-'}`;
            
            document.getElementById('dockedStatus').textContent = 
                state.docked ? 'æ˜¯' : 'å¦';
            
            document.getElementById('edgeType').textContent = 
                state.edge || 'æ— ';
            
            document.getElementById('hiddenStatus').textContent = 
                state.hidden ? 'æ˜¯' : 'å¦';
            
            document.getElementById('panelDirection').textContent = 
                state.panelDirection || '-';
            
            // è®¡ç®—è·ç¦»è¾¹ç¼˜çš„è·ç¦»
            if (state.docked && state.edge) {
                document.getElementById('edgeDistance').textContent = '0px (å·²åœé )';
            } else {
                const btnRect = toggleBtn.getBoundingClientRect();
                const viewport = getViewport();
                const minDist = Math.min(
                    btnRect.left,
                    viewport.width - btnRect.right,
                    btnRect.top,
                    viewport.height - btnRect.bottom
                );
                document.getElementById('edgeDistance').textContent = 
                    `${minDist.toFixed(1)}px`;
            }
        }

        // ==================== æ—¥å¿— ====================
        function log(message) {
                    const time = new Date().toLocaleTimeString();
                    const logText = `[${time}] ${message}`;
        
                    // ä¿å­˜åˆ°å®Œæ•´æ—¥å¿—æ•°ç»„
                    state.allLogs.push(logText);
        
                    // æ·»åŠ åˆ°é¡µé¢æ˜¾ç¤º
                    const line = document.createElement('div');
                    line.className = 'line';
                    line.textContent = logText;
                    debugInfo.appendChild(line);
        
                    // é™åˆ¶é¡µé¢æ˜¾ç¤ºçš„æ—¥å¿—æ•°é‡ï¼ˆåªæ˜¾ç¤ºæœ€å 10 æ¡ï¼‰
                    while (debugInfo.children.length > 10) {
                        debugInfo.removeChild(debugInfo.firstChild);
                    }
        
                    console.log(`[åŸå‹] ${message}`);
                }
        // ==================== å¯åŠ¨ ====================
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>